# @catalyst-team/poly-sdk

[![English](https://img.shields.io/badge/lang-English-blue.svg)](README.en.md)
[![ä¸­æ–‡](https://img.shields.io/badge/è¯­è¨€-ä¸­æ–‡-red.svg)](README.zh-CN.md)
[![ç‰ˆæœ¬](https://img.shields.io/badge/ç‰ˆæœ¬-0.2.0-blue.svg)](package.json)
[![è®¸å¯](https://img.shields.io/badge/è®¸å¯-MIT-green.svg)](LICENSE)

Polymarket ç»Ÿä¸€ TypeScript SDK - é¢„æµ‹å¸‚åœºäº¤æ˜“ã€å¥—åˆ©æ£€æµ‹ã€èªæ˜é’±åˆ†æå’Œå®Œæ•´å¸‚åœºæ•°æ®ã€‚

**å¼€å‘è€…**: [@hhhx402](https://x.com/hhhx402) | **é¡¹ç›®**: [Catalyst.fun](https://x.com/catalystdotfun)

## æ ¸å¿ƒåŠŸèƒ½

- ğŸ”„ **å®æ—¶å¥—åˆ©æ£€æµ‹**: WebSocket ç›‘æ§ + è‡ªåŠ¨æ‰§è¡Œ
- ğŸ“Š **èªæ˜é’±åˆ†æ**: è¿½è¸ªé¡¶çº§äº¤æ˜“è€…åŠå…¶ç­–ç•¥
- ğŸ’± **äº¤æ˜“é›†æˆ**: æ”¯æŒ GTC/GTD/FOK/FAK è®¢å•ç±»å‹
- ğŸ” **é“¾ä¸Šæ“ä½œ**: Splitã€Mergeã€Redeem CTF ä»£å¸
- ğŸŒ‰ **è·¨é“¾æ¡¥æ¥**: ä» Ethereumã€Solanaã€Bitcoin å……å€¼
- ğŸ’° **DEX äº¤æ¢**: ä½¿ç”¨ QuickSwap V3 åœ¨ Polygon ä¸Šå…‘æ¢ä»£å¸
- ğŸ“ˆ **å¸‚åœºåˆ†æ**: K çº¿ã€ä¿¡å·ã€æˆäº¤é‡åˆ†æ

## å®‰è£…

```bash
pnpm add @catalyst-team/poly-sdk
```

## æ¡†æ¶ä½¿ç”¨

```bash
pnpm tsx main.ts
```

## å¿«é€Ÿå¼€å§‹

```typescript
import { PolymarketSDK } from '@catalyst-team/poly-sdk';

const sdk = new PolymarketSDK();

// é€šè¿‡ slug æˆ– condition ID è·å–å¸‚åœº
const market = await sdk.getMarket('will-trump-win-2024');
console.log(market.tokens.yes.price); // 0.65

// è·å–å¤„ç†åçš„è®¢å•ç°¿ï¼ˆåŒ…å«åˆ†ææ•°æ®ï¼‰
const orderbook = await sdk.getOrderbook(market.conditionId);
console.log(orderbook.summary.longArbProfit); // å¥—åˆ©æœºä¼š

// æ£€æµ‹å¥—åˆ©
const arb = await sdk.detectArbitrage(market.conditionId);
if (arb) {
  console.log(`${arb.type} å¥—åˆ©: ${arb.profit * 100}% åˆ©æ¶¦`);
}
```

## æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                             PolymarketSDK                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç¬¬ä¸‰å±‚: æœåŠ¡å±‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚é’±åŒ…æœåŠ¡     â”‚ â”‚å¸‚åœºæœåŠ¡     â”‚ â”‚å®æ—¶æœåŠ¡       â”‚ â”‚   æˆæƒæœåŠ¡              â”‚â”‚
â”‚  â”‚ - ç”¨æˆ·ç”»åƒ  â”‚ â”‚ - K çº¿     â”‚ â”‚- è®¢é˜…ç®¡ç†     â”‚ â”‚   - ERC20 æˆæƒ          â”‚â”‚
â”‚  â”‚ - å–å‡ºæ£€æµ‹  â”‚ â”‚ - ä¿¡å·     â”‚ â”‚- ä»·æ ¼ç¼“å­˜     â”‚ â”‚   - ERC1155 æˆæƒ        â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ å¥—åˆ©æœåŠ¡: å®æ—¶å¥—åˆ©æ£€æµ‹ã€è‡ªåŠ¨å†å¹³è¡¡ã€æ™ºèƒ½æ¸…ä»“                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ äº¤æ¢æœåŠ¡: Polygon ä¸Šçš„ DEX äº¤æ¢ (QuickSwap V3, USDC/USDC.e è½¬æ¢)         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç¬¬äºŒå±‚: API å®¢æˆ·ç«¯                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Data API â”‚ â”‚Gamma API â”‚ â”‚ CLOB API â”‚ â”‚ WebSocket â”‚ â”‚   è·¨é“¾æ¡¥            â”‚  â”‚
â”‚  â”‚æŒä»“æ•°æ®  â”‚ â”‚ å¸‚åœºæ•°æ® â”‚ â”‚ è®¢å•ç°¿   â”‚ â”‚ å®æ—¶ä»·æ ¼  â”‚ â”‚   è·¨é“¾å……å€¼          â”‚  â”‚
â”‚  â”‚äº¤æ˜“è®°å½•  â”‚ â”‚ äº‹ä»¶æ•°æ® â”‚ â”‚ äº¤æ˜“     â”‚ â”‚ ä»·æ ¼æ¨é€  â”‚ â”‚   å¤šé“¾æ”¯æŒ          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ äº¤æ˜“å®¢æˆ·ç«¯: è®¢å•æ‰§è¡Œ                  â”‚ â”‚ CTF å®¢æˆ·ç«¯: é“¾ä¸Šæ“ä½œ           â”‚  â”‚
â”‚  â”‚ GTC/GTD/FOK/FAK, å¥–åŠ±, ä½™é¢æŸ¥è¯¢      â”‚ â”‚ Split / Merge / Redeem ä»£å¸    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç¬¬ä¸€å±‚: åŸºç¡€è®¾æ–½                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚é€Ÿç‡é™åˆ¶å™¨  â”‚  â”‚  ç¼“å­˜   â”‚  â”‚  é”™è¯¯    â”‚  â”‚   ç±»å‹     â”‚ â”‚ ä»·æ ¼å·¥å…·     â”‚   â”‚
â”‚  â”‚æŒ‰ API é™åˆ¶ â”‚  â”‚TTL æœºåˆ¶ â”‚  â”‚ é‡è¯•æœºåˆ¶ â”‚  â”‚ ç»Ÿä¸€å®šä¹‰   â”‚ â”‚ å¥—åˆ©æ£€æµ‹     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ ¸å¿ƒæ¦‚å¿µ

### ç†è§£ Polymarket çš„é•œåƒè®¢å•ç°¿

âš ï¸ **å…³é”®ï¼šPolymarket è®¢å•ç°¿æœ‰ä¸€ä¸ªå®¹æ˜“è¢«å¿½ç•¥çš„é•œåƒç‰¹æ€§**

```
ä¹° YES @ P = å– NO @ (1-P)
```

è¿™æ„å‘³ç€**åŒä¸€è®¢å•ä¼šå‡ºç°åœ¨ä¸¤ä¸ªè®¢å•ç°¿ä¸­**ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª "å– NO @ 0.50" è®¢å•ä¼šåŒæ—¶ä½œä¸º "ä¹° YES @ 0.50" å‡ºç°åœ¨ YES è®¢å•ç°¿ä¸­ã€‚

**å¸¸è§é”™è¯¯ï¼š**
```typescript
// âŒ é”™è¯¯: ç®€å•ç›¸åŠ ä¼šé‡å¤è®¡ç®—é•œåƒè®¢å•
const askSum = YES.ask + NO.ask;  // â‰ˆ 1.998-1.999ï¼Œè€Œé â‰ˆ 1.0
const bidSum = YES.bid + NO.bid;  // â‰ˆ 0.001-0.002ï¼Œè€Œé â‰ˆ 1.0
```

**æ­£ç¡®åšæ³•ï¼šä½¿ç”¨æœ‰æ•ˆä»·æ ¼**
```typescript
import { getEffectivePrices, checkArbitrage } from '@catalyst-team/poly-sdk';

// è®¡ç®—è€ƒè™‘é•œåƒåçš„æœ€ä¼˜ä»·æ ¼
const effective = getEffectivePrices(yesAsk, yesBid, noAsk, noBid);

// effective.effectiveBuyYes = min(YES.ask, 1 - NO.bid)
// effective.effectiveBuyNo = min(NO.ask, 1 - YES.bid)
// effective.effectiveSellYes = max(YES.bid, 1 - NO.ask)
// effective.effectiveSellNo = max(NO.bid, 1 - YES.ask)

// ä½¿ç”¨æœ‰æ•ˆä»·æ ¼æ£€æµ‹å¥—åˆ©
const arb = checkArbitrage(yesAsk, noAsk, yesBid, noBid);
if (arb) {
  console.log(`${arb.type} å¥—åˆ©: ${(arb.profit * 100).toFixed(2)}% åˆ©æ¶¦`);
  console.log(arb.description);
}
```

è¯¦ç»†æ–‡æ¡£è§: [docs/01-polymarket-orderbook-arbitrage.md](docs/01-polymarket-orderbook-arbitrage.md)

### ArbitrageService - è‡ªåŠ¨åŒ–äº¤æ˜“

å®æ—¶å¥—åˆ©æ£€æµ‹å’Œæ‰§è¡Œï¼Œæ”¯æŒå¸‚åœºæ‰«æã€è‡ªåŠ¨å†å¹³è¡¡å’Œæ™ºèƒ½æ¸…ä»“ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ ¸å¿ƒåŠŸèƒ½                                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ scanMarkets()     - æ‰«æå¸‚åœºæ‰¾å¥—åˆ©æœºä¼š                                      â”‚
â”‚  â€¢ start(market)     - å¯åŠ¨å®æ—¶ç›‘æ§ + è‡ªåŠ¨æ‰§è¡Œ                                 â”‚
â”‚  â€¢ clearPositions()  - æ™ºèƒ½æ¸…ä»“ (æ´»è·ƒå¸‚åœºå–å‡º, å·²ç»“ç®—å¸‚åœº redeem)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è‡ªåŠ¨å†å¹³è¡¡å™¨                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å¥—åˆ©éœ€è¦ USDC + YES/NO ä»£å¸ï¼Œå†å¹³è¡¡å™¨è‡ªåŠ¨ç»´æŒæœ€ä½³ç»„åˆï¼š                         â”‚
â”‚  â€¢ USDC < 20%  â†’ è‡ªåŠ¨ Merge (YES+NO â†’ USDC)                                 â”‚
â”‚  â€¢ USDC > 80%  â†’ è‡ªåŠ¨ Split (USDC â†’ YES+NO)                                 â”‚
â”‚  â€¢ å†·å´æœºåˆ¶ï¼šæ“ä½œé—´éš” 30 ç§’ï¼Œæ£€æµ‹é—´éš” 10 ç§’                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  éƒ¨åˆ†æˆäº¤ä¿æŠ¤                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å¥—åˆ©éœ€è¦åŒæ—¶ä¹°å…¥ YES å’Œ NOï¼Œä½†è®¢å•å¯èƒ½éƒ¨åˆ†æˆäº¤ï¼š                                 â”‚
â”‚  â€¢ sizeSafetyFactor=0.8 â†’ ä»…ä½¿ç”¨ 80% çš„è®¢å•ç°¿æ·±åº¦                             â”‚
â”‚  â€¢ autoFixImbalance=true â†’ å¦‚æœåªæˆäº¤ä¸€ä¾§ï¼Œè‡ªåŠ¨å–å‡ºå¤šä½™çš„ä»£å¸                   â”‚
â”‚  â€¢ imbalanceThreshold=5 â†’ YES-NO å·®é¢è¶…è¿‡ $5 æ—¶è§¦å‘ä¿®å¤                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å®Œæ•´å·¥ä½œæµï¼š**

```typescript
import { ArbitrageService } from '@catalyst-team/poly-sdk';

const arbService = new ArbitrageService({
  privateKey: process.env.POLY_PRIVKEY,
  profitThreshold: 0.005,  // æœ€å° 0.5% åˆ©æ¶¦
  minTradeSize: 5,         // æœ€å° $5
  maxTradeSize: 100,       // æœ€å¤§ $100
  autoExecute: true,       // è‡ªåŠ¨æ‰§è¡Œå¥—åˆ©æœºä¼š

  // å†å¹³è¡¡é…ç½®
  enableRebalancer: true,  // å¯ç”¨è‡ªåŠ¨å†å¹³è¡¡
  minUsdcRatio: 0.2,       // æœ€å° 20% USDC (ä½äºåˆ™ Split)
  maxUsdcRatio: 0.8,       // æœ€å¤§ 80% USDC (é«˜äºåˆ™ Merge)
  targetUsdcRatio: 0.5,    // å†å¹³è¡¡ç›®æ ‡ 50%
  imbalanceThreshold: 5,   // ä¿®å¤å‰çš„æœ€å¤§ YES-NO å·®é¢
  rebalanceInterval: 10000, // æ¯ 10 ç§’æ£€æŸ¥ä¸€æ¬¡
  rebalanceCooldown: 30000, // æ“ä½œé—´éš”æœ€å° 30 ç§’

  // æ‰§è¡Œå®‰å…¨ï¼ˆé˜²æ­¢éƒ¨åˆ†æˆäº¤å¯¼è‡´ YES â‰  NOï¼‰
  sizeSafetyFactor: 0.8,   // ä½¿ç”¨ 80% çš„è®¢å•ç°¿æ·±åº¦
  autoFixImbalance: true,  // å¦‚æœä¸€ä¾§å¤±è´¥è‡ªåŠ¨å–å‡ºå¤šä½™éƒ¨åˆ†
});

// ç›‘å¬äº‹ä»¶
arbService.on('opportunity', (opp) => {
  console.log(`${opp.type.toUpperCase()} å¥—åˆ©: ${opp.profitPercent.toFixed(2)}%`);
});

arbService.on('execution', (result) => {
  if (result.success) {
    console.log(`âœ… å·²æ‰§è¡Œ: $${result.profit.toFixed(2)} åˆ©æ¶¦`);
  }
});

// ========== æ­¥éª¤ 1: æ‰«æå¸‚åœº ==========
const results = await arbService.scanMarkets({ minVolume24h: 5000 }, 0.005);
console.log(`æ‰¾åˆ° ${results.filter(r => r.arbType !== 'none').length} ä¸ªæœºä¼š`);

// æˆ–è€…ä¸€é”®æ‰«æ + å¯åŠ¨æœ€ä½³å¸‚åœº
const best = await arbService.findAndStart(0.005);
if (!best) {
  console.log('æœªæ‰¾åˆ°å¥—åˆ©æœºä¼š');
  process.exit(0);
}
console.log(`ğŸ¯ å·²å¯åŠ¨: ${best.market.name} (+${best.profitPercent.toFixed(2)}%)`);

// ========== æ­¥éª¤ 2: è¿è¡Œå¥—åˆ© ==========
// æœåŠ¡ç°åœ¨è‡ªåŠ¨ç›‘æ§å¹¶æ‰§è¡Œå¥—åˆ©...
await new Promise(resolve => setTimeout(resolve, 60 * 60 * 1000)); // 1 å°æ—¶

// ========== æ­¥éª¤ 3: åœæ­¢å¹¶æ¸…ä»“ ==========
await arbService.stop();
console.log('ç»Ÿè®¡æ•°æ®:', arbService.getStats());

// æ™ºèƒ½æ¸…ä»“: æ´»è·ƒå¸‚åœº merge+sell, å·²ç»“ç®—å¸‚åœº redeem
const clearResult = await arbService.clearPositions(best.market, true);
console.log(`âœ… å·²å›æ”¶: $${clearResult.totalUsdcRecovered.toFixed(2)}`);
```

## API å®¢æˆ·ç«¯

### TradingClient - è®¢å•æ‰§è¡Œ

```typescript
import { TradingClient, RateLimiter } from '@catalyst-team/poly-sdk';

const tradingClient = new TradingClient(new RateLimiter(), {
  privateKey: process.env.POLYMARKET_PRIVATE_KEY!,
});

await tradingClient.initialize();

// GTC é™ä»·å•ï¼ˆä¿æŒæœ‰æ•ˆç›´åˆ°æˆäº¤æˆ–å–æ¶ˆï¼‰
const order = await tradingClient.createOrder({
  tokenId: yesTokenId,
  side: 'BUY',
  price: 0.45,
  size: 10,
  orderType: 'GTC',
});

// FOK å¸‚ä»·å•ï¼ˆå®Œå…¨æˆäº¤æˆ–å–æ¶ˆï¼‰
const marketOrder = await tradingClient.createMarketOrder({
  tokenId: yesTokenId,
  side: 'BUY',
  amount: 10, // $10 USDC
  orderType: 'FOK',
});

// è®¢å•ç®¡ç†
const openOrders = await tradingClient.getOpenOrders();
await tradingClient.cancelOrder(orderId);
```

### CTFClient - é“¾ä¸Šä»£å¸æ“ä½œ

CTF (Conditional Token Framework) å®¢æˆ·ç«¯æ”¯æŒ Polymarket æ¡ä»¶ä»£å¸çš„é“¾ä¸Šæ“ä½œã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CTF æ“ä½œå¿«é€Ÿå‚è€ƒ                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ“ä½œ       â”‚ åŠŸèƒ½                â”‚ å…¸å‹ç”¨ä¾‹                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Split     â”‚ USDC â†’ YES + NO     â”‚ åšå¸‚ï¼šåˆ›å»ºä»£å¸åº“å­˜                          â”‚
â”‚  Merge     â”‚ YES + NO â†’ USDC     â”‚ å¥—åˆ©ï¼šä¹°å…¥åŒè¾¹ååˆå¹¶                        â”‚
â”‚  Redeem    â”‚ è·èƒœä»£å¸ â†’ USDC     â”‚ ç»“ç®—ï¼šé¢†å–è·èƒœä»£å¸                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```typescript
import { CTFClient } from '@catalyst-team/poly-sdk';

const ctf = new CTFClient({
  privateKey: process.env.POLYMARKET_PRIVATE_KEY!,
  rpcUrl: 'https://polygon-rpc.com',
});

// Split: USDC â†’ YES + NO ä»£å¸
const splitResult = await ctf.split(conditionId, '100');
console.log(`åˆ›å»ºäº† ${splitResult.yesTokens} YES + ${splitResult.noTokens} NO`);

// Merge: YES + NO â†’ USDC
const tokenIds = {
  yesTokenId: market.tokens[0].tokenId,
  noTokenId: market.tokens[1].tokenId,
};
const mergeResult = await ctf.mergeByTokenIds(conditionId, tokenIds, '100');
console.log(`æ”¶åˆ° ${mergeResult.usdcReceived} USDC`);

// Redeem: è·èƒœä»£å¸ â†’ USDC
const redeemResult = await ctf.redeemByTokenIds(conditionId, tokenIds);
console.log(`å…‘æ¢äº† ${redeemResult.tokensRedeemed} ä¸ªä»£å¸`);
```

âš ï¸ **é‡è¦ï¼šå¯¹ Polymarket å¸‚åœºä½¿ç”¨ `mergeByTokenIds()` å’Œ `redeemByTokenIds()`**

Polymarket ä½¿ç”¨çš„è‡ªå®šä¹‰ token ID ä¸æ ‡å‡† CTF position ID ä¸åŒã€‚å§‹ç»ˆä½¿ç”¨ `*ByTokenIds` æ–¹æ³•é…åˆ CLOB API è¿”å›çš„ token IDã€‚

### SwapService - Polygon ä¸Šçš„ DEX äº¤æ¢

ä½¿ç”¨ QuickSwap V3 åœ¨ Polygon ä¸Šäº¤æ¢ä»£å¸ã€‚å¯¹äº CTF æ“ä½œï¼Œè½¬æ¢ä¸º USDC.e æ˜¯å¿…éœ€çš„ã€‚

âš ï¸ **Polymarket CTF çš„ USDC vs USDC.e**

| ä»£å¸ | åœ°å€ | Polymarket CTF |
|------|------|---------------|
| USDC.e | `0x2791...` | âœ… **å¿…éœ€** |
| USDC (åŸç”Ÿ) | `0x3c49...` | âŒ ä¸æ¥å— |

```typescript
import { SwapService, POLYGON_TOKENS } from '@catalyst-team/poly-sdk';

const swapService = new SwapService(signer);

// å°†åŸç”Ÿ USDC äº¤æ¢ä¸º USDC.e ç”¨äº CTF æ“ä½œ
const swapResult = await swapService.swap('USDC', 'USDC_E', '100');
console.log(`å·²äº¤æ¢: ${swapResult.amountOut} USDC.e`);

// å°† MATIC äº¤æ¢ä¸º USDC.e
const maticSwap = await swapService.swap('MATIC', 'USDC_E', '50');

// äº¤æ¢å‰è·å–æŠ¥ä»·
const quote = await swapService.getQuote('WETH', 'USDC_E', '0.1');
console.log(`é¢„æœŸè¾“å‡º: ${quote.estimatedAmountOut} USDC.e`);
```

### WalletService - èªæ˜é’±åˆ†æ

```typescript
// è·å–é¡¶çº§äº¤æ˜“è€…
const traders = await sdk.wallets.getTopTraders(10);

// è·å–é’±åŒ…ç”»åƒï¼ˆå«èªæ˜åˆ†æ•°ï¼‰
const profile = await sdk.wallets.getWalletProfile('0x...');
console.log(profile.smartScore); // 0-100

// æ£€æµ‹å–å‡ºæ´»åŠ¨ï¼ˆç”¨äºè·Ÿå•ç­–ç•¥ï¼‰
const sellResult = await sdk.wallets.detectSellActivity(
  '0x...',
  conditionId,
  Date.now() - 24 * 60 * 60 * 1000
);
if (sellResult.isSelling) {
  console.log(`å·²å–å‡º ${sellResult.percentageSold}%`);
}
```

### MarketService - K çº¿å’Œä¿¡å·

```typescript
// è·å– K çº¿èœ¡çƒ›å›¾
const klines = await sdk.markets.getKLines(conditionId, '1h', { limit: 100 });

// è·å–åŒ K çº¿ï¼ˆYES + NOï¼‰å«ä»·å·®åˆ†æ
const dual = await sdk.markets.getDualKLines(conditionId, '1h');

// å†å²ä»·å·®ï¼ˆæ¥è‡ªæˆäº¤æ”¶ç›˜ä»·ï¼‰- ç”¨äºå›æµ‹
for (const point of dual.spreadAnalysis) {
  console.log(`${point.timestamp}: æ€»å’Œ=${point.priceSum}, ä»·å·®=${point.priceSpread}`);
  if (point.arbOpportunity) {
    console.log(`  å†å² ${point.arbOpportunity} ä¿¡å·`);
  }
}

// å®æ—¶ä»·å·®ï¼ˆæ¥è‡ªè®¢å•ç°¿ï¼‰- ç”¨äºå®ç›˜äº¤æ˜“
if (dual.realtimeSpread) {
  const rt = dual.realtimeSpread;
  if (rt.arbOpportunity) {
    console.log(`ğŸ¯ ${rt.arbOpportunity} å¥—åˆ©: ${rt.arbProfitPercent.toFixed(2)}%`);
  }
}
```

#### ä»·å·®åˆ†æ - ä¸¤ç§æ–¹æ³•

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  spreadAnalysis (å†å²åˆ†æ)        â”‚  realtimeSpread (å®æ—¶äº¤æ˜“)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ•°æ®æº: æˆäº¤æ”¶ç›˜ä»·                â”‚  æ•°æ®æº: è®¢å•ç°¿ bid/ask             â”‚
â”‚  YES_close + NO_close             â”‚  ä½¿ç”¨æœ‰æ•ˆä»·æ ¼ï¼ˆè€ƒè™‘é•œåƒï¼‰            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ… å¯æ„å»ºå†å²å›¾è¡¨                 â”‚  âŒ æ— å†å²æ•°æ®*                      â”‚
â”‚  âœ… Polymarket ä¿ç•™æˆäº¤å†å²        â”‚  âŒ Polymarket ä¸ä¿ç•™å¿«ç…§           â”‚
â”‚  âœ… é€‚åˆå›æµ‹                       â”‚  âœ… é€‚åˆå®ç›˜äº¤æ˜“                     â”‚
â”‚  âš ï¸ å¥—åˆ©ä¿¡å·ä»…ä¾›å‚è€ƒ               â”‚  âœ… å¥—åˆ©åˆ©æ¶¦è®¡ç®—å‡†ç¡®                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

* è¦æ„å»ºå†å²å®æ—¶ä»·å·®ï¼Œå¿…é¡»è‡ªå·±å­˜å‚¨è®¢å•ç°¿å¿«ç…§
  å‚è€ƒ: apps/api/src/services/spread-sampler.ts
```

### RealtimeService - WebSocket è®¢é˜…

âš ï¸ **é‡è¦ï¼šè®¢å•ç°¿è‡ªåŠ¨æ’åº**

Polymarket CLOB API è¿”å›çš„è®¢å•ç°¿é¡ºåºä¸æ ‡å‡†é¢„æœŸç›¸åï¼š
- **bids**: å‡åºï¼ˆæœ€ä½ä»·åœ¨å‰ = æœ€å·®ä»·ï¼‰
- **asks**: é™åºï¼ˆæœ€é«˜ä»·åœ¨å‰ = æœ€å·®ä»·ï¼‰

æˆ‘ä»¬çš„ SDK **è‡ªåŠ¨è§„èŒƒåŒ–**è®¢å•ç°¿æ•°æ®ï¼š
- **bids**: é™åºï¼ˆæœ€é«˜ä»·åœ¨å‰ = æœ€ä½³ä¹°ä»·ï¼‰
- **asks**: å‡åºï¼ˆæœ€ä½ä»·åœ¨å‰ = æœ€ä½³å–ä»·ï¼‰

è¿™æ„å‘³ç€ä½ å¯ä»¥å®‰å…¨åœ°ä½¿ç”¨ `bids[0]` å’Œ `asks[0]` è·å–æœ€ä¼˜ä»·æ ¼ï¼š

```typescript
const book = await sdk.clobApi.getOrderbook(conditionId);
const bestBid = book.bids[0]?.price;  // âœ… æœ€é«˜ä¹°ä»·ï¼ˆæœ€ä½³ï¼‰
const bestAsk = book.asks[0]?.price;  // âœ… æœ€ä½å–ä»·ï¼ˆæœ€ä½³ï¼‰

// WebSocket æ›´æ–°åŒæ ·è‡ªåŠ¨æ’åº
wsManager.on('bookUpdate', (update) => {
  const bestBid = update.bids[0]?.price;  // âœ… å·²æ’åº
  const bestAsk = update.asks[0]?.price;  // âœ… å·²æ’åº
});
```

## ç¤ºä¾‹

| ç¤ºä¾‹ | è¯´æ˜ | å‘½ä»¤ |
|------|------|------|
| [åŸºç¡€ç”¨æ³•](examples/01-basic-usage.ts) | è·å–å¸‚åœºã€è®¢å•ç°¿ã€æ£€æµ‹å¥—åˆ© | `pnpm example:basic` |
| [èªæ˜é’±](examples/02-smart-money.ts) | é¡¶çº§äº¤æ˜“è€…ã€é’±åŒ…ç”»åƒã€èªæ˜åˆ†æ•° | `pnpm example:smart-money` |
| [å¸‚åœºåˆ†æ](examples/03-market-analysis.ts) | å¸‚åœºä¿¡å·ã€æˆäº¤é‡åˆ†æ | `pnpm example:market-analysis` |
| [K çº¿èšåˆ](examples/04-kline-aggregation.ts) | ä»æˆäº¤è®°å½•æ„å»º OHLCV èœ¡çƒ›å›¾ | `pnpm example:kline` |
| [è·Ÿå•ç­–ç•¥](examples/05-follow-wallet-strategy.ts) | è¿½è¸ªèªæ˜é’±æŒä»“ã€æ£€æµ‹é€€å‡º | `pnpm example:follow-wallet` |
| [æœåŠ¡æ¼”ç¤º](examples/06-services-demo.ts) | æ‰€æœ‰ SDK æœåŠ¡å®æˆ˜ | `pnpm example:services` |
| [å®æ—¶ WebSocket](examples/07-realtime-websocket.ts) | å®æ—¶ä»·æ ¼æ¨é€ã€è®¢å•ç°¿æ›´æ–° | `pnpm example:realtime` |
| [äº¤æ˜“è®¢å•](examples/08-trading-orders.ts) | GTCã€GTDã€FOKã€FAK è®¢å•ç±»å‹ | `pnpm example:trading` |
| [å¥–åŠ±è¿½è¸ª](examples/09-rewards-tracking.ts) | åšå¸‚æ¿€åŠ±ã€æ”¶ç›Š | `pnpm example:rewards` |
| [CTF æ“ä½œ](examples/10-ctf-operations.ts) | Splitã€mergeã€redeem ä»£å¸ | `pnpm example:ctf` |
| [å®æ—¶å¥—åˆ©æ‰«æ](examples/11-live-arbitrage-scan.ts) | æ‰«æçœŸå®å¸‚åœºå¯»æ‰¾æœºä¼š | `pnpm example:live-arb` |

## é”™è¯¯å¤„ç†

```typescript
import { PolymarketError, ErrorCode, withRetry } from '@catalyst-team/poly-sdk';

try {
  const market = await sdk.getMarket('invalid-slug');
} catch (error) {
  if (error instanceof PolymarketError) {
    if (error.code === ErrorCode.MARKET_NOT_FOUND) {
      console.log('å¸‚åœºæœªæ‰¾åˆ°');
    } else if (error.code === ErrorCode.RATE_LIMITED) {
      console.log('é€Ÿç‡é™åˆ¶ï¼Œç¨åé‡è¯•');
    }
  }
}

// è‡ªåŠ¨é‡è¯•ï¼ˆæŒ‡æ•°é€€é¿ï¼‰
const result = await withRetry(() => sdk.getMarket(slug), {
  maxRetries: 3,
  baseDelay: 1000,
});
```

## é€Ÿç‡é™åˆ¶

å†…ç½®æŒ‰ API ç±»å‹çš„é€Ÿç‡é™åˆ¶ï¼š
- Data API: 10 è¯·æ±‚/ç§’
- Gamma API: 10 è¯·æ±‚/ç§’
- CLOB API: 5 è¯·æ±‚/ç§’

```typescript
import { RateLimiter, ApiType } from '@catalyst-team/poly-sdk';

// è‡ªå®šä¹‰é€Ÿç‡é™åˆ¶å™¨
const limiter = new RateLimiter({
  [ApiType.DATA]: { maxConcurrent: 5, minTime: 200 },
  [ApiType.GAMMA]: { maxConcurrent: 5, minTime: 200 },
  [ApiType.CLOB]: { maxConcurrent: 2, minTime: 500 },
});
```

## å¤šæ¨¡å—é¡¹ç›®æ¶æ„

é™¤äº†æ ¸å¿ƒ SDKï¼Œé¡¹ç›®è¿˜åŒ…å«ä¸‰ä¸ªç‹¬ç«‹çš„åº”ç”¨æ¨¡å—ï¼š

```
FKPolySDK/
â”œâ”€â”€ src/              # SDK æ ¸å¿ƒæºç 
â”œâ”€â”€ api_src/          # API åç«¯æœåŠ¡ (Fastify)
â”œâ”€â”€ console_src/      # æ§åˆ¶å°å®¢æˆ·ç«¯ (Commander.js)
â””â”€â”€ web_front_src/    # Web å‰ç«¯ (React + Vite)
```

### API åç«¯ (api_src/)

åŸºäº Fastify çš„ REST API æœåŠ¡ï¼Œæä¾›å¸‚åœºæ•°æ®ã€å¥—åˆ©æ‰«æã€é’±åŒ…åˆ†ææ¥å£ã€‚

```bash
cd api_src
pnpm install
pnpm dev    # å¯åŠ¨æœåŠ¡: http://localhost:3000
```

| ç«¯ç‚¹ | æè¿° |
|------|------|
| `GET /api/markets/trending` | è·å–çƒ­é—¨å¸‚åœº |
| `GET /api/arbitrage/scan` | æ‰«æå¥—åˆ©æœºä¼š |
| `GET /api/wallets/leaderboard` | è·å–æ’è¡Œæ¦œ |
| `ws://localhost:3000/ws/market/:id` | å®æ—¶æ•°æ®æ¨é€ |

API æ–‡æ¡£: http://localhost:3000/docs

### æ§åˆ¶å° (console_src/)

åŸºäº Commander.js çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºå¿«é€Ÿæµ‹è¯•å’Œç›‘æ§ã€‚

```bash
cd console_src
pnpm install
pnpm tsx src/index.ts markets list      # åˆ—å‡ºçƒ­é—¨å¸‚åœº
pnpm tsx src/index.ts arb scan          # æ‰«æå¥—åˆ©
pnpm tsx src/index.ts wallet leaderboard  # äº¤æ˜“å‘˜æ’è¡Œ
pnpm tsx src/index.ts monitor scan      # æŒç»­ç›‘æ§å¥—åˆ©
```

### Web å‰ç«¯ (web_front_src/)

åŸºäº React + Vite + Ant Design çš„ Web ä»ªè¡¨ç›˜ã€‚

```bash
cd web_front_src
pnpm install
pnpm dev    # å¯åŠ¨: http://localhost:5173
```

> **æ³¨æ„**: å‰ç«¯éœ€è¦ API åç«¯è¿è¡Œåœ¨ `localhost:3000`

| é¡µé¢ | åŠŸèƒ½ |
|------|------|
| `/dashboard` | ä»ªè¡¨ç›˜æ¦‚è§ˆ |
| `/markets` | å¸‚åœºåˆ—è¡¨ |
| `/arbitrage` | å¥—åˆ©æ‰«æ |
| `/wallets` | é’±åŒ…æ’è¡Œ |

## æ–‡æ¡£

- [è®¢å•ç°¿ä¸å¥—åˆ©æŒ‡å—](docs/01-polymarket-orderbook-arbitrage.md) - ç†è§£é•œåƒè®¢å•

## ä¾èµ–

- `@nevuamarkets/poly-websockets` - WebSocket å®¢æˆ·ç«¯
- `bottleneck` - é€Ÿç‡é™åˆ¶
- `ethers` - åŒºå—é“¾äº¤äº’

## è®¸å¯

MIT

